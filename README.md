# web-cognito-api
JS + JSDoc library for integrating with the AWS Cognito library

This is a JavaScript library with JSDoc for integrating with AWS Cognito. It is used for handling user authentication and session management with an AWS Cognito User Pool for use in browser and Node.js environments.

**Package Name:** web-cognito-api

**Version:** 0.2.0

**Description:** API Manager for AWS Cognito Services

-----

## **FUNCTIONALITY**

Currently supports core AWS Cognito user pool operations.

- Configure
- Sign Up

-----

## **FUTURE FUNCTIONALITY**
- Confirm Sign Up
- Sign In
- Sign Out
- Get Current Authenticated User
- Get Current User Session
- Refresh Session
- Forgot Password
- Confirm Forgot Password

-----

## **LIBRARY STRUCTURE**

The library is organized to separate source code, examples, tests, and dependencies, making it easy to navigate and contribute.

```
web-cognito-api/
├── coverage/                           # Code coverage reports generated by the Jest test runner.
├── examples/                           # Demonstrations of how to use the library.
│   └── configure/
│       └── index.html                  # Functionality example, open with the `new run dev` terminal command in VS Code
│       └── index.js                    # Demo logic
│   └── ...other demos/
│   └── amplifyconfiguration.json       # Connection details for AWS Cognito user pool
|   └── index.html                      # Core demo link page, opens automatically when running the 'npm run dev' command
|   └── temp-email.json                 # Connection details for temporary email service, used by demos
├── node_modules/                       # Project dependencies (for development).
├── src/                                # The main source code for the library. Re-exports all types and typedefs
│   └── configure/
│       └── configure-api.js            # Contains functionality regarding the Cognito Configuration Api
│       └── configure-api.schemas.js    # Contains schemas used for validation
│       └── configure-api.types.js      # Contains type definitions
│   └── ...other api folders/
│   └── cognito-api-manager.js          # Primary singleton for Cognito Api access
│   └── index.js                        # Library entry point, exports CognitoApiManager and type definitions
├── tests/                              # Unit tests for the library.
├── vendor/                             # Third-party dependencies bundled with the package.
│   └── joi/                            # Joi schema validation library.
├── .gitignore                          # Specifies intentionally untracked files to ignore.
├── jest.config.cjs                     # Jest test runner configuration file.
├── package-lock.json                   # Sets developer dependencies locked version numbers
├── package.json                        # Defines project metadata and dependencies.
├── README.md                           # This file
├── tsconfig.json                       # Typescript config. Connects JS+JSDoc code into Typescript compatabile definitions
├── vite.config.js                      # Vite config. Defines how our project exports into our /dist/ folder
```

-----

## **DEMO INSTRUCTIONS**

To run the demos, you'll first need to install the 'Amplify' (Amazon Api) packages used by this project.

1. In the Visual Studio Code Terminal, run the `npm install` command

2. Open `/examples/amplifyconfiguration.json` in VS Code and modify the details with your own AWS Cognito User Pool

3. In the VSCode terminal, run the `npm run dev` command to open the demo link page

4. Choose a demo to try, it will use the Cognito info in the `amplifyconfiguration.json` file for configuration.

-----

## **INSTALLATION INSTRUCTIONS**

To use this package in your project, install it via `npm` from this GitHub repository:

```
npm install https://github.com/GambitGamesLLC/web-cognito-api.git
```

-----

## **BUILD STEPS**

Although this is a JS+JSDoc vanilla project, we are dependent on the AWS Cognito Api, via the `Amplify` package, which does not have a vanilla JS implementation available via a content-delivery network (CDN).

To build the project, make sure you've first run `npm install`, then call `npm run build`

This will update the `/dist/` folder with our JS+JSDoc files, as well as the typescript definitions

-----

## **UNIT TESTING INSTRUCTIONS**

Run the following command in Visual Studio Code:

```
npm test
```

This will run the included unit tests using `jest` as the test runner. The mock service worker (`msw`) will mock server commands and callbacks.

When complete, this will also generate a coverage guide and place it in the `./coverage/` folder at the root of the project.

-----

## **USAGE INSTRUCTIONS**

The core of this package is the `CognitoApiManager` class, a singleton that centralizes all interactions with the AWS Cognito API.

After initialization, each Cognito function and endpoint is available for access via convenience methods with the `CognitoApiManager` class, even though their actual implementation is contained within seperate files. 

For example, the `ConfigureApi` object is a private variable within the `CognitoApiManager` with a `Configure()` function, but as a user of this library you can access this function via the `Configure()` function directly from the `CognitoApiManager` class.

▶ **Initialization & Usage**
Step 1: Get the singleton instance.

```javascript
import { CognitoApiManager } from 'web-cognito-api';

// Get the singleton instance
const cognitoApiManager = CognitoApiManager.GetInstance();

// Fetch the amplifyconfiguration.json file
const config = await fetch('../amplifyconfiguration.json');

// Configure the Amplify Api to connect to our Cognito user pool
await cognitoApiManager.Configure( config );

// Now you can now use the other Cognito Functions and endpoints via the other objects
await cognitoApiManager.SignUp('testuser@gmail.com', 'password123');
```

-----

## **SUPPORT**

Created and maintained by Gambit Games LLC.

For support or feature requests, contact: gambitgamesllc@gmail.com.
