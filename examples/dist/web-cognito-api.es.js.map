{"version":3,"file":"web-cognito-api.es.js","sources":["../../src/cognito-api-manager.js"],"sourcesContent":["/**\r\n * cognito-api-manager.js\r\n * @file Singleton class for interacting with the Cognito API.\r\n * @description This file exports the CognitoApiManager singleton, \r\n * which centralizes AWS Cognito requests \r\n * @exports {CognitoApiManager}\r\n */\r\n\r\n//#region IMPORTS\r\n\r\n// Importing Amplify From the AWS Amplify Lib\r\nimport { Amplify } from '@aws-amplify/core';\r\n\r\n// Import the signUp method from the auth library\r\nimport { signUp } from '@aws-amplify/auth';\r\n\r\n/**\r\n * @typedef {import('@aws-amplify/core').ResourcesConfig} ResourcesConfig\r\n * @typedef {import('@aws-amplify/auth/dist/esm/types').AuthNextSignUpStep} AuthNextSignUpStep\r\n * @typedef {import('@aws-amplify/auth').SignUpOutput} SignUpOutput\r\n */\r\n\r\n//#endregion\r\n\r\n/**\r\n * Singleton class for interacting with the Cognito API\r\n * @class\r\n */\r\nexport class CognitoApiManager \r\n{\r\n    \r\n    //#region PRIVATE - VARIABLES\r\n\r\n    //#endregion\r\n\r\n    //#region PUBLIC - VARIABLES\r\n\r\n    //#endregion\r\n\r\n    //#region PUBLIC - CONSTRUCTOR\r\n\r\n    /**\r\n     * Initializes the CognitoApiManager singleton, preparing it for use\r\n     */\r\n    //------------------------------------------------//\r\n    constructor() \r\n    //------------------------------------------------//\r\n    {\r\n        // Singleton check\r\n        if (CognitoApiManager.instance) \r\n        {\r\n            return CognitoApiManager.instance;\r\n        }\r\n\r\n        // Sets the singleton reference so we know we've already called the constructor, preventing duplicates\r\n        CognitoApiManager.instance = this;\r\n\r\n    } //END constructor() Method\r\n\r\n    //#endregion\r\n    \r\n    //#region PUBLIC - GET INSTANCE\r\n\r\n    /**\r\n     * Get the single instance of the CognitoApiManager\r\n     * @returns {CognitoApiManager} The CognitoApiManager instance\r\n     */\r\n    // ----------------------------------------------------------------- //\r\n    static GetInstance() \r\n    // ----------------------------------------------------------------- //\r\n    {\r\n        if( !CognitoApiManager.instance )\r\n        {\r\n            CognitoApiManager.instance = new CognitoApiManager();\r\n        }\r\n\r\n        return CognitoApiManager.instance;\r\n\r\n    } //END GetInstance() Method\r\n\r\n    //#endregion\r\n\r\n    //#region PUBLIC - CONFIGURE\r\n\r\n    /**\r\n     * Sets the Amplify configuration file\r\n     * @param {ResourcesConfig} config The 'amplifyconfiguration.json' config file\r\n     * @returns void\r\n     */\r\n    // ----------------------------------------------------------------- //\r\n    Configure( config ) \r\n    // ----------------------------------------------------------------- //\r\n    {\r\n        if( config === undefined || config === null )\r\n        {\r\n            console.log( \"cognito-api-manager.js Configure() passed in 'config' parameter is undefined or null\");\r\n            return;\r\n        }\r\n\r\n        try\r\n        {\r\n            /**\r\n             * Passes our configuration file into the core Amplify object\r\n             */\r\n            Amplify.configure(config);\r\n\r\n            // Debug the configuration file\r\n            console.log( Amplify.getConfig() );\r\n        }\r\n        catch(error)\r\n        {\r\n            console.log( \"cognito-api-manager.js Configure() Error: \" + error);\r\n        }\r\n        \r\n    } //END Configure() Method\r\n\r\n    //#endregion\r\n    \r\n    //#region PUBLIC - CREATE USER\r\n\r\n    /**\r\n     * Creates a new user within the user pool\r\n     * @param {string} username The name for the new user\r\n     * @param {string} password The password for the new user\r\n     * @param {object} attributes An object of user attributes, e.g., { email: 'user@example.com' }\r\n     * @returns {Promise<SignUpOutput['nextStep']>} The 'nextStep' property returned by Amplify after a user is successfully created in the user pool\r\n     */\r\n    // ----------------------------------------------------------------- //\r\n    async CreateUser( username, password, attributes ) \r\n    // ----------------------------------------------------------------- //\r\n    {\r\n        if (!username) \r\n        {\r\n            return Promise.reject( new Error(\"cognito-api-manager.js CreateUser() Error: username cannot be null, undefined, or empty.\" ) );\r\n        }\r\n\r\n        if (!password) \r\n        {\r\n            return Promise.reject( new Error(\"cognito-api-manager.js CreateUser() Error: password cannot be null, undefined, or empty.\" ) );\r\n        }\r\n\r\n        if (attributes === undefined || attributes === null) \r\n        {\r\n            return Promise.reject( new Error(\"cognito-api-manager.js CreateUser() Error: attributes cannot be null or undefined.\" ) );\r\n        }\r\n\r\n        try\r\n        {\r\n            const { userId, nextStep } = await signUp\r\n            ({\r\n                username,\r\n                password,\r\n                options: \r\n                {\r\n                    userAttributes: attributes,\r\n                    // autoSignIn: true // Optional: Signs in the user automatically after sign-up\r\n                }\r\n            });\r\n\r\n            console.log(`cognito-api-manager.js CreateUser() Successfully signed up user ${userId}`);\r\n            console.log('cognito-api-manager.js CreateUser() Next step:', nextStep);\r\n\r\n            return nextStep;\r\n        }\r\n        catch(error)\r\n        {\r\n            return Promise.reject( new Error(\"cognito-api-manager.js CreateUser() Error: \" + error ));\r\n        }\r\n        \r\n    } //END CreateUser() Method\r\n\r\n    //#endregion\r\n\r\n\r\n} //END CognitoApiManager Class"],"names":["CognitoApiManager","config","Amplify","error","username","password","attributes","userId","nextStep","signUp"],"mappings":";;AA4BO,MAAMA,EACb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAgBI,cAEA;AAEI,QAAIA,EAAkB;AAElB,aAAOA,EAAkB;AAI7B,IAAAA,EAAkB,WAAW;AAAA,EAEjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAWA,OAAO,cAEP;AACI,WAAKA,EAAkB,aAEnBA,EAAkB,WAAW,IAAIA,MAG9BA,EAAkB;AAAA,EAE7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAYA,UAAWC,GAEX;AACI,QAA4BA,KAAW,MACvC;AACI,cAAQ,IAAK,sFAAsF;AACnG;AAAA,IACJ;AAEA,QACA;AAII,MAAAC,EAAQ,UAAUD,CAAM,GAGxB,QAAQ,IAAKC,EAAQ,UAAS,CAAE;AAAA,IACpC,SACMC,GACN;AACI,cAAQ,IAAK,+CAA+CA,CAAK;AAAA,IACrE;AAAA,EAEJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EAcA,MAAM,WAAYC,GAAUC,GAAUC,GAEtC;AACI,QAAI,CAACF;AAED,aAAO,QAAQ,OAAQ,IAAI,MAAM,0FAA0F,CAAE;AAGjI,QAAI,CAACC;AAED,aAAO,QAAQ,OAAQ,IAAI,MAAM,0FAA0F,CAAE;AAGjI,QAAgCC,KAAe;AAE3C,aAAO,QAAQ,OAAQ,IAAI,MAAM,oFAAoF,CAAE;AAG3H,QACA;AACI,YAAM,EAAE,QAAAC,GAAQ,UAAAC,EAAQ,IAAK,MAAMC,EAClC;AAAA,QACG,UAAAL;AAAA,QACA,UAAAC;AAAA,QACA,SACA;AAAA,UACI,gBAAgBC;AAAA;AAAA,QAEpC;AAAA,MACA,CAAa;AAED,qBAAQ,IAAI,mEAAmEC,CAAM,EAAE,GACvF,QAAQ,IAAI,kDAAkDC,CAAQ,GAE/DA;AAAA,IACX,SACML,GACN;AACI,aAAO,QAAQ,OAAQ,IAAI,MAAM,gDAAgDA,CAAK,CAAE;AAAA,IAC5F;AAAA,EAEJ;AAAA;AAAA;AAKJ;"}